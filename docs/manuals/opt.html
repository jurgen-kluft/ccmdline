<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0049)opt.html -->
<HTML><HEAD><TITLE>opt command line parser:</TITLE>
<META http-equiv=Content-Type content="text/html; charset=windows-1252"><!-- Created on June, 23  2003 by texi2html 1.64 --><!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<META content="opt command line parser: " name=description>
<META content="opt command line parser: " name=keywords>
<META content=document name=resource-type>
<META content=global name=distribution>
<META content="MSHTML 6.00.2800.1476" name=GENERATOR></HEAD>
<BODY lang="" text=#000000 vLink=#800080 aLink=#ff0000 link=#0000ff 
bgColor=#ffffff><A name=SEC_Top></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H1>opt command line parser</H1>This document describes <CODE>opt</CODE>, 
v3.19a, a subroutine library for communicating options and parameter values to a 
C program via the command line, parameter files, environment variables, or a 
rudimentary builtin interactive menu. 
<P></P>
<P>
<BLOCKQUOTE>
  <TABLE cellSpacing=0 border=0>
    <TBODY>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC1">1. 
        Nutshell</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left>What is opt, in a nutshell?</TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC4">2. 
      Opt</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left>What is opt, in a deeper philosophical 
      sense?</TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC26">3. 
      Etc</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left>What 
  else?</TD></TR></TBODY></TABLE><BR>&nbsp;--&nbsp;The&nbsp;Detailed&nbsp;Node&nbsp;Listing&nbsp;--- 
  <BR><BR>Nutshell <BR><BR>
  <TABLE cellSpacing=0 border=0>
    <TBODY>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC2">1.1 What 
        the user sees</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left>How to use programs that use opt</TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC3">1.2 What 
        the programmer sees</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left>How to write programs that use 
    opt</TD></TR></TBODY></TABLE><BR>Opt <BR><BR>
  <TABLE cellSpacing=0 border=0>
    <TBODY>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC5">2.1 
        Philosophical digression</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC6">2.2 What 
        is Opt?</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC7">2.3 User 
        Interface</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC13">2.4 
        Programmer Interface</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR></TBODY></TABLE><BR>What&nbsp;is&nbsp;Opt? 
  <BR><BR>
  <TABLE cellSpacing=0 border=0>
    <TBODY>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC7">2.3 User 
        Interface</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC13">2.4 
        Programmer Interface</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR></TBODY></TABLE><BR>User&nbsp;Interface 
  <BR><BR>
  <TABLE cellSpacing=0 border=0>
    <TBODY>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC8">2.3.1 
        Direct command line options</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC9">2.3.2 
        Options from a named file</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC10">2.3.3 
        Environment strings</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC11">2.3.4 
        Rudimentary builtin menu</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC12">2.3.5 
        Standard usage messages</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top 
  align=left></TD></TR></TBODY></TABLE><BR>Programmer&nbsp;Interface <BR><BR>
  <TABLE cellSpacing=0 border=0>
    <TBODY>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC14">2.4.1 
        Example code</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC15">2.4.2 
        Registering options</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC23">2.4.3 
        Setting some strings</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC24">2.4.4 
        Registering functions (hooks)</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC25">2.4.5 
        Misc</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top 
  align=left></TD></TR></TBODY></TABLE><BR>Registering&nbsp;options <BR><BR>
  <TABLE cellSpacing=0 border=0>
    <TBODY>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC16">2.4.2.1 
        Delimited options</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC17">2.4.2.2 
        Positional options</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC18">2.4.2.3 
        Flexible options</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC19">2.4.2.4 
        Default values</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC20">2.4.2.5 
        Modifying option attributes</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC21">2.4.2.6 
        Registering array options</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC22">2.4.2.7 
        Registering options in C++</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC21">2.4.2.6 
        Registering array options</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR></TBODY></TABLE><BR>Etc <BR><BR>
  <TABLE cellSpacing=0 border=0>
    <TBODY>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC27">3.1 
        Installation</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC28">3.2 
        Adding <CODE>opt</CODE> to existing code: a recipe</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC29">3.3 So, 
        you don't like global variables?</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC30">3.4 
        Single file</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC31">3.5 
        Extensions</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC32">3.6 
        Bugs</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC33">Warranty</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC34">Copying</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR></TBODY></TABLE><BR></BLOCKQUOTE>
<P>
<HR SIZE=1>
<A name=SEC1></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top"> &lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC2"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top"> Up 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC4"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE><A name=Nutshell></A>
<P></P>
<P>
<H1>1. Nutshell </H1><!--docid::SEC1::-->
<P><CODE>opt</CODE> is a subroutine library which facilitates the convenient 
input of parameters to a C program. Parameters are parsed from a command line, 
with further facilities for reading options from files, from environment 
strings, or from an interactive environment. </P>
<P>The aim of the <CODE>opt</CODE> package is to permit programs to be both 
user- and programmer- friendly. The package attempts to provide a direct and 
relatively full-featured input interface to the ultimate user of the program, 
and at the same time to impose a minimal amount of work on the programmer to 
"add" options parsing to existing software. </P>
<P><CODE>opt</CODE> is similar in its effects to the standard UNIX (and also to 
the GNU) <CODE>getopts</CODE> packages, and I have tried (though possibly not as 
hard as I could have) to keep them as similar as possible whenever feasable. But 
<CODE>opt</CODE> does takes a somewhat different philosophy. Variables are 
"registered" to strings, and whenever the strings are used on the command line, 
the variables are updated accordingly. This tends to be a little more compact 
(and in my view more convenient) than the loop and case-statement approach used 
by <CODE>getopt</CODE>. Also, <CODE>opt</CODE> has a few more bells and 
whistles. </P>
<P>
<BLOCKQUOTE>
  <TABLE cellSpacing=0 border=0>
    <TBODY>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC2">1.1 What 
        the user sees</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left>How to use programs that use opt</TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC3">1.2 What 
        the programmer sees</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left>How to write programs that use 
    opt</TD></TR></TBODY></TABLE></BLOCKQUOTE>
<P><A name="What the user sees"></A>
<HR SIZE=6>
<A name=SEC2></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC1"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC3"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC1"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC1"> Up </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC4"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H2>1.1 What the user sees </H2><!--docid::SEC2::-->
<P>Code written with <CODE>opt</CODE> can read parameters from the command line; 
for example running the program 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>birthday -m 9 -d 11 -y1989 -v
</PRE></TD></TR></TBODY></TABLE>can set paramters <VAR>month</VAR>=9, 
<VAR>day</VAR>=11, and <VAR>year</VAR>=1989, and also turn on the 
<VAR>verbose</VAR> flag, inside the <CODE>birthday</CODE> program. Note that the 
space between the single-character option name and the value is optional. Some 
parameters can also be set using long names, for instance: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>birthday --month=9 --day 11 -y1989 
</PRE></TD></TR></TBODY></TABLE>Note that the <SAMP>`='</SAMP> can only be used 
with the long form of the options, but it is optional and white space can also 
be used to separate the option name from its value. Note also that the long name 
<SAMP>`--month'</SAMP> and the variable name <VAR>month</VAR> only happen to be 
the same in this example; they aren't in general. Alternatively, you can use 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>birthday @file.opt
</PRE></TD></TR></TBODY></TABLE>to read the paramters from the file 
<TT>`file.opt'</TT>. There is also an interactive menu. If you type 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>birthday --menu
</PRE></TD></TR></TBODY></TABLE>at the command line, then you'll see this on the 
screen: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>birthday
m Month                                    4
d Day of month                             24
y Year                                     1993
v Verbose                                  FALSE
p Use Pade Approximants                    FALSE
g Gregorian                                FALSE    
(Type ? for Help)
-&gt; 
</PRE></TD></TR></TBODY></TABLE>By invoking the menu, the user is able to see 
what all the available options are, even the obscure ones. The prompt 
<SAMP>`-&gt;'</SAMP> is waiting for your response; type <SAMP>`m 9'</SAMP> and 
return to set the value of <VAR>month</VAR> to 9. Set any other parameters as 
you see fit. Enter a blank line, and the you'll again see a list of parameters 
and values. Then type <SAMP>`='</SAMP> and the program will run with those 
parameters, and then return to the prompt. You can change the parameters and run 
again if you like. Type <SAMP>`.'</SAMP> to exit. </P>
<P>Note that the programmer may optionally disable the menu, so some 
applications that use <CODE>opt</CODE> may not allow the --menu option. </P>
<P>Finally, the program is somewhat self-documenting. Type 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>birthday --help
</PRE></TD></TR></TBODY></TABLE>at the command line, and then you'll see a 
message like this: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>Usage: birthday [options]
To invoke the menu, type:
        birthday --menu
The options are:
 -m, --month        &lt;INT&gt;           Month
 -d, --day          &lt;INT&gt;           Day of month
 -y                 &lt;INT&gt;           Year
 -v                 &lt;INTLEVEL&gt;      Verbose
 -p                 &lt;BOOL&gt;          Use Pade Approximants
 -g                 &lt;BOOL&gt;          Gregorian
</PRE></TD></TR></TBODY></TABLE>and then the program exits. There are several 
other features provided by <CODE>opt</CODE> that will be discussed in later 
sections. </P>
<P><A name="What the programmer sees"></A>
<HR SIZE=6>
<A name=SEC3></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC2"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC4"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC1"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC1"> Up </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC4"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H2>1.2 What the programmer sees </H2><!--docid::SEC3::-->The above example is 
based on actual output from the following code. This is not the simplest 
possible, but it illustrates what I personally find to be the most commonly used 
features. More sophisticated options processing is also available, and will be 
discussed in later sections. 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>/* birthday.c */

#include &lt;stdio.h&gt;
#include &lt;opt.h&gt;                /* part of opt package */

/* Parameters that user has access to via opt package;
 * They are typically (but not necessarily) global variables.
 * Their default values are provided in the assignement statements.
 */
int month=9;
int day=11;
int year=1989;
int verb=0;
int pade=0;
int greg=0;

/* All of what the program itself does is in the birthday() function;
 * This function does what a non-options parsing main() might do.
 */
int birthday(int argc, char **argv)
{
    if (month == 9 &amp;&amp; day == 11 &amp;&amp; year == 1989)
        printf("Happy birthday, Max\n");
    else if (month == 4 &amp;&amp; day == 24 &amp;&amp; year == 1993)
        printf("Happy birthday, Sky\n");

    if (verb)
        printf("Hello, world: %4d/%02d/%02d\n",year,month,day);

    return OPT_OK;
}

/* all of the options parsing is in the new main() function */

int main(int argc, char **argv)
{
    /* optrega() registers short name '-m' and long name '--month' to
     * variable 'month', and provides brief description "Month"
     */
    optrega(&amp;month,OPT_INT,'m',"month","Month");
    optrega(&amp;day,  OPT_INT,'d',"day",  "Day of month");
    /* optreg() only provides short name '-y' */
    optreg(&amp;year,OPT_INT,'y',"Year");
    /* register some flag variables... */
    optreg(&amp;verb,OPT_INTLEVEL,'v',"Verbose");
    optreg(&amp;pade,OPT_BOOL,'p',"Use Pade Approximants");
    optreg(&amp;greg,OPT_BOOL,'g',"Gregorian");

    /* the function birthday() is registered with opt */
    optMain(birthday);

    /* opt() is the routine that actually parses the argc/argv
     * variables
     */
    opt(&amp;argc,&amp;argv);
    opt_free();
    /* and when it's done, argc/argv will contain the leftover
     * argc/argv variables, including the same argv[0] as in
     * the original argc/argv
     */

    /* Now that variables are parsed, run birthday() */
    return birthday(argc,argv);
}
</PRE></TD></TR></TBODY></TABLE>
<P>The opt package consists of the header file <TT>`opt.h'</TT>, which must be 
<CODE>#include</CODE>'d in any code that uses opt, and the library file 
<TT>`libopt.a'</TT>, which is linked to the program at compile time 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>        cc -I<I>dir_with_opt_h</I> -L<I>dir_with_libopt_a</I> birthday.c -lopt
</PRE></TD></TR></TBODY></TABLE></P>
<P><A name=Opt></A>
<HR SIZE=6>
<A name=SEC4></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC3"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC5"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC1"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top"> Up 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H1>2. Opt </H1><!--docid::SEC4::-->
<P>
<BLOCKQUOTE>
  <TABLE cellSpacing=0 border=0>
    <TBODY>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC5">2.1 
        Philosophical digression</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC6">2.2 What 
        is Opt?</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC7">2.3 User 
        Interface</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC13">2.4 
        Programmer Interface</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR></TBODY></TABLE></BLOCKQUOTE>
<P><A name="Philosophical digression"></A>
<HR SIZE=6>
<A name=SEC5></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC4"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC6"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC4"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC4"> Up </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H2>2.1 Philosophical digression </H2><!--docid::SEC5::-->
<P>Programs that provide a convenient user interface, especially those with 
gooey user interfaces (GUI's), generally require a fair bit of programming to 
produce. But for short programs that will not be used a lot, "programmer 
friendly" is more important than "user friendly." If a program grows in size or 
usefulness, the programmer can then go back and put in a better interface. But 
in doing so, the programmer trades away the "programmer friendliness" of the 
original code to end up with software that exhibits "user friendliness". </P>
<P>Suppose you want to write a program that depends on some parameters. As a 
programmer, it is convenient to set the parameters (in the vernacular, to 
"hardcode" them) to desired values right in the program. It is not really very 
convenient, though, because you have to recompile the program every time you 
want to run it with different values. This is especially inconvenient when the 
user and the programmer are different people. </P>
<P>It is usually more convenient (for the user) if the parameters can be 
specified at run time. There is, of course, more than one way to do this. You 
can specify parameter values in an input file, for instance. Then the program 
has to open the file, read the values, assign them to the appropriate variables, 
and then compute accordingly. It's a little inconvenient for the programmer, and 
a little inconvenient for the user, but if there are a large number of 
parameters, this is often the best approach. Even for a small number of 
parameters, it is useful to at least have the option of saving parameter values 
in a file. </P>
<P>Another approach is to have the program "ask" the user what parameter values 
are desired. After typing <SAMP>`birthday'</SAMP> for instance, the program 
might respond with 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>What is the number of the month?_
</PRE></TD></TR></TBODY></TABLE>to which the user would reply, say, "9". Then 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>Enter the day of the month and the year?_
</PRE></TD></TR></TBODY></TABLE>to which the user would type "11 1989" or 
perhaps "11,1989" depending on the format that the program expected for input. 
This style of program sometimes seems friendly at first, since the user doesn't 
have to know a lot about the program to run it, but just has to answer the 
questions. It can get to be pretty awkward after awhile, though, particularly if 
there are a lot of options, and especially if the program is to be used in shell 
scripts. It is not too hard to write the program to do this (it is basically a 
series alternating <CODE>printf</CODE>'s and <CODE>scanf</CODE>'s), but for a 
lot of parameters, it can get pretty tedious. </P>
<P>One of the most popular approaches is to specify the options and parameter 
values directly from the command line. The user types 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>birthday -m 9 -d 11 -y 1989
</PRE></TD></TR></TBODY></TABLE>and this specifies in one compact line values 
for month, day, and year. This is a bit of a compromise; the user has to know 
what all the options are, and the programmer has to do a little string parsing. 
The motivation for the <CODE>opt</CODE> package is to bridge this gap: to on the 
one hand simplify the programmer's task of converting command line strings into 
parameter assignments, and on the other hand to provide the user a little more 
information about the available options and a little more convenience in setting 
those options and parameter values. </P>
<P><A name="What is Opt"></A>
<HR SIZE=6>
<A name=SEC6></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC5"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC7"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC4"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC4"> Up </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H2>2.2 What is Opt? </H2><!--docid::SEC6::-->
<P>I know I've said this already, but<SMALL>...</SMALL> <CODE>opt</CODE> is a 
subroutine library for communicating options and parameter values to a C program 
via the command line, parameter files, environment variables, or a rudimentary 
builtin interactive menu. </P>
<P>The aim of the <CODE>opt</CODE> package is to permit programs to be both 
user- and programmer- friendly. The package attempts to provide a direct and 
relatively full-featured input interface to the ultimate user of the program, 
and at the same time to impose a minimal amount of work on the programmer to 
"add" options parsing to existing software. </P>
<P>The next sections basically parallel the <TT>`Nutshell'</TT> chapter, but add 
a little more detail. First, the <CODE>opt</CODE> interface will be described, 
as it appears to the user. This comprises the advertisement for incorporating 
<CODE>opt</CODE> into your code. Then it will be shown how to write code that 
uses <CODE>opt</CODE> for its user interface. </P>
<P>
<BLOCKQUOTE>
  <TABLE cellSpacing=0 border=0>
    <TBODY>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC7">2.3 User 
        Interface</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC13">2.4 
        Programmer Interface</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR></TBODY></TABLE></BLOCKQUOTE>
<P><A name="User Interface"></A>
<HR SIZE=6>
<A name=SEC7></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC6"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC8"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC4"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC4"> Up </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC13"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H2>2.3 User Interface </H2><!--docid::SEC7::-->
<P>Currently, <CODE>opt</CODE> supports the following modes of interface to the 
user: </P>
<P>
<UL>
  <LI>Direct command line options 
  <LI>Options from a named file 
  <LI>Environment strings 
  <LI>Rudimentary builtin menu 
  <LI>Standard usage messages </LI></UL>
<P>
<BLOCKQUOTE>
  <TABLE cellSpacing=0 border=0>
    <TBODY>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC8">2.3.1 
        Direct command line options</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC9">2.3.2 
        Options from a named file</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC10">2.3.3 
        Environment strings</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC11">2.3.4 
        Rudimentary builtin menu</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC12">2.3.5 
        Standard usage messages</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR></TBODY></TABLE></BLOCKQUOTE>
<P><A name="Direct command line options"></A>
<HR SIZE=6>
<A name=SEC8></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC7"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC9"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC6"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC7"> Up </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC13"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H3>2.3.1 Direct command line options </H3><!--docid::SEC8::-->Options are 
typically invoked with a delimiter (either <SAMP>`-'</SAMP> or 
<SAMP>`--'</SAMP>) followed by an alphabetic character or string, and both of 
those by the value of the parameter. Thus <SAMP>`birthday -m5'</SAMP> means that 
the parameter associated with <SAMP>`m'</SAMP> takes the value 5. The same 
effect is acheived by <SAMP>`birthday -m 5'</SAMP> (with a space between 
<SAMP>`m'</SAMP> and <SAMP>`5'</SAMP>). The power of this assignment is that 
options for several parameters can be assigned in a flexible way: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>birthday -m9 -d11 -y1989  ;<I>Sets values of month, day, and year</I>
birthday -d11 -y1989 -m9  ;<I>Doesn't matter what order</I>
birthday -m9              ;<I>Set month=9, day and year to their defaults</I>
birthday -m 9             ;<I>Space is permitted between m and 9</I>
birthday - m9             ;<I>Not valid to have space beweeen - and m</I>
birthday -m9-d11          ;<I>Not valid; need space between each</I>
                          ;<I>delimited option</I>
</PRE></TD></TR></TBODY></TABLE>
<P>Some kinds of options are of a different form. Among these are "flags" which 
signal whether a given option is on off. Thus, one might signal that a program 
is to operate in verbose mode with a command line of the form <SAMP>`birthday 
-m9 -v'</SAMP>. Alternatively, one can write <SAMP>`birthday -m9 -v+'</SAMP> to 
explicitly turn the verbose option on, or <SAMP>`birthday -m9 -v-'</SAMP> to 
explicitly turn verbose off. Unlike options which assign values, flag parameters 
can be assigned with a single delimiter. Thus, one might have a verbose 
(<SAMP>`v'</SAMP>) flag, a gregorian (<SAMP>`g'</SAMP>) flag, and a "use Pade 
approximant" (<SAMP>`p'</SAMP>) flag. In this case, one can write commands of 
the following forms: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>birthday -v -g -p  ;<I>Invoke all flags</I>
birthday -vgp      ;<I>Invoke all flags, in a more compact notation</I>
birthday -pv+g-    ;<I>Invoke p-flag, while explicitly</I>
                   ;<I>turning v-flag on, g-flag off.</I>
</PRE></TD></TR></TBODY></TABLE>Invoking a flag is not always the same as 
setting the flag to ON. Depending on how the flags are defined in the program, 
invoking a flag may set its value to ON, to OFF, or toggle it to the opposite of 
its value before invocation. For instance, if the <SAMP>`p'</SAMP>-flag is a 
toggle, the command <SAMP>`birthday -p -m9 -p'</SAMP> toggles it twice, so that 
the effect of the two invocations are to cancel each other out. The motivation 
for toggles and other kinds of flags will become apparent when the command line 
is extended to files and environment variables and interactive menus. </P>
<P><A name="Options from a named file"></A>
<HR SIZE=6>
<A name=SEC9></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC8"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC10"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC6"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC7"> Up </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC13"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H3>2.3.2 Options from a named file </H3><!--docid::SEC9::-->
<P>It is clear that a program with many options begins to get unwieldy on the 
command line, and it is desirable to save options in a file, and not have to 
retype them every time the program is run. The <CODE>opt</CODE> package permits 
this with command lines of the form <SAMP>`birthday @bday.opt'</SAMP>. Here 
<TT>`bday.opt'</TT> is a file which contains options which are used by the 
program <CODE>birthday</CODE>. The form of the options file <TT>`bday.opt'</TT> 
is like that of the command line itself. Thus, if the file is composed of the 
string <SAMP>`-m9 -d11 -y1989 -vg'</SAMP> then it is as if that string replaced 
<SAMP>`@bday.opt'</SAMP> on the command line. </P>
<P>A file permits some luxuries that are not available on the command line 
directly. One of these is that you are not limited to a single line, and another 
is that you can add comments in the file. Thus if the file looks like this: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>;file: bday.opt
;Comments are preceded by a semi-colon
-m9             ;September
-g              ;Use gregorian
-d11 -y1989     ;Can still have several options on one line
</PRE></TD></TR></TBODY></TABLE>Then <SAMP>`birthday @bday.opt" is exactly 
equivalent to "birthday -m9 -g -d11 -y1989'</SAMP>. </P>
<P>It is possible to mix direct command line options with file options. Thus 
<SAMP>`birthday -v @bday.opt -p'</SAMP> is equivalent to <SAMP>`birthday -v -m9 
-g -d11 -y1989 -p'</SAMP>. This is particularly useful if you want to make many 
runs in which only a few parameters are changed at a time. For instance, 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>birthday @defaults.opt 
birthday @defaults.opt -m10
birthday @defaults.opt -v
</PRE></TD></TR></TBODY></TABLE>might represent three runs of the program 
"birthday", the first with a default set of options, the second with the same 
options except m=10, and the third the same as the first, except that verbose is 
turned ON. </P>
<P>It is also possible to nest files, so that one might have two files: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>;file: bd1.opt
-m5             ;set some option values
-y 1997
@bd2.opt        ;get more options from file bd2.opt
</PRE></TD></TR></TBODY></TABLE>and 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>;file: bd2.opt
-d 11           ;set day=11
-y 1989         ;set year=1989
</PRE></TD></TR></TBODY></TABLE>and then the command line <SAMP>`birthday 
@bd1.opt'</SAMP> conceptually expands to be the equivalent <SAMP>`birthday -m5 
-y 1997 -d 11 -y1989'</SAMP>. This is a completely valid command line, even 
though the 'y' option appears twice; it is the last value of a variable which 
the program uses, in this case y=1989. </P>
<P>Of course, recursive nesting will only get you into trouble. </P>
<P>There is a useful abbreviation for files: @@ stands for the default options 
filename which is always the program name with the extension ".opt". Thus 
<SAMP>`birthday @@'</SAMP> is equivalent to <SAMP>`birthday 
@birthday.opt'</SAMP> </P>
<P>You can also write to an <CODE>opt</CODE> file; the directive 
<SAMP>`%file.opt'</SAMP> writes the current options to the file 
<TT>`file.opt'</TT> and then exits. Here, <SAMP>`%%'</SAMP>, invoked for a 
program called <SAMP>`birthday'</SAMP>, is an abbreviation for 
<SAMP>`%birthday.opt'</SAMP>. </P>
<P><A name="Environment strings"></A>
<HR SIZE=6>
<A name=SEC10></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC9"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC11"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC6"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC7"> Up </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC13"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H3>2.3.3 Environment strings </H3><!--docid::SEC10::-->
<P>The program which uses the <CODE>opt</CODE> package can be instructed to look 
for an environment variable for options. If birthday sets 
<SAMP>`BIRTHDAY'</SAMP> as its option environment variable, and if the 
environment string <SAMP>`BIRTHDAY=-m9 -y1989'</SAMP> is set, then running 
<SAMP>`birthday'</SAMP> is equivalent to running <SAMP>`birthday -m9 
-y1989'</SAMP>. The environment options are assigned before any command line 
options, so they can be over-ridden: thus the command <SAMP>`birthday 
-m10'</SAMP> resets m to be equal to 10 instead of m=9 suggested by the 
environment string, but one still has y=1989. The environment string is 
therefore a useful place for storing default options that you don't want to have 
to keep typing them each time you run the program. In the UNIX C-shell you can 
set an environment string with the <SAMP>`setenv'</SAMP> command: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>setenv BIRTHDAY "-m9 -y1989"
</PRE></TD></TR></TBODY></TABLE>while in the Bourne shell, you'd write 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>BIRTHDAY="-m9 -y1989"
export BIRTHDAY
</PRE></TD></TR></TBODY></TABLE>Note that UNIX environment strings are not the 
same thing as shell variables In MS-DOS, one uses the command "set"; the format 
is 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>set BIRTHDAY=-m9 -y1989
</PRE></TD></TR></TBODY></TABLE>with no quotes. To unset, type "set BIRTHDAY=", 
and to view just type "set". (However, it's been ages since I've used 
<CODE>opt</CODE> on MS-DOS; I'd be surprised if it still worked on that 
platform. Of course I'm always surprised when anything works on that platform.) 
</P>
<P><A name="Rudimentary builtin menu"></A>
<HR SIZE=6>
<A name=SEC11></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC10"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC12"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC6"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC7"> Up </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC13"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H3>2.3.4 Rudimentary builtin menu </H3><!--docid::SEC11::-->
<P>Although the above methods provide flexible means of getting parameter values 
to a program which is run in background or batch mode, it is also useful to 
alter parameters interactively. The <CODE>opt</CODE> package provides a 
convenient way to do this, with an interactive menu. To invoke the menu type 
<SAMP>`$'</SAMP> (or <SAMP>`--menu'</SAMP>) at the end of the command line. For 
instance, typing <SAMP>`birthday -m4 -y1993 $'</SAMP> will return a menu that 
looks something like 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>birthday
m Month                                    4
d Day of month                             11
y Year                                     1993
v Verbose                                  FALSE
p Use Pade Approximants                    FALSE
g Gregorian                                FALSE
(Type ? for Help)
-&gt; 
</PRE></TD></TR></TBODY></TABLE>The prompt <SAMP>`-&gt;'</SAMP> is an invitation 
to the user to write a segment of a command line. For instance a reply of 
<SAMP>`-m4 -vg'</SAMP> will come back with a bare prompt: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>-&gt;
</PRE></TD></TR></TBODY></TABLE>Responding with an empty line will give a new 
menu that looks like 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>m Month                                    4
d Day of month                             11
y Year                                     1989
v Verbose                                  TRUE
p Use Pade Approximants                    FALSE
g Gregorian                                TRUE
(Type ? for Help)
-&gt; 
</PRE></TD></TR></TBODY></TABLE>When you are ready to run the program with these 
values, type <SAMP>`='</SAMP>. Actually, there are a number of things you can 
type at the command prompt; type a plain <SAMP>`?'</SAMP> for the following 
description: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>        - Options delimiter   
        ? Help                
        = Run program and return to menu
        ! Shell to Operating System
        $ Exit menu           
        + Additional options  
        @&lt;filename&gt; Get options from file
        @@ Get options from file [birthday.opt]
        %&lt;filename&gt; Put options in file 
        %% Put options in file [birthday.opt]
        . Quit                
-&gt; 
</PRE></TD></TR></TBODY></TABLE></P>
<P>It is also possible that <SAMP>`?c'</SAMP> will give further information 
about the option specified by <SAMP>`c'</SAMP>, although this requires that the 
programmer supplied extra information (usually, the brief description is all 
that is available). For example, 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>        -&gt; ?d
        d: Use day of month, should be less than 32
        -&gt;
</PRE></TD></TR></TBODY></TABLE></P>
<P>If you don't want the user to have access to the menu for some reason, then 
you can invoke the function <SAMP>`optDisableMenu()'</SAMP> before calling 
<SAMP>`opt()'</SAMP>, to achieve this. You might want to do this to avoid stuff 
about menus appearing in the usage message, for instance. </P>
<P><A name="Standard usage messages"></A>
<HR SIZE=6>
<A name=SEC12></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC11"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC13"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC6"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC7"> Up </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC13"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H3>2.3.5 Standard usage messages </H3><!--docid::SEC12::-->The user can type 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>birthday --help
</PRE></TD></TR></TBODY></TABLE>and get a fairly complete usage message: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>Usage: birthday [options]
To invoke the menu, type:
        birthday --menu
The options are:
 -m, --month        &lt;integer&gt;       Month
 -d, --day          &lt;integer&gt;       Day of month
 -y                 &lt;integer&gt;       Year
 -v                 &lt;flag&gt;          Verbose
 -p                 &lt;flag&gt;          Use Pade Approximants
 -g                 &lt;flag&gt;          Gregorian
</PRE></TD></TR></TBODY></TABLE>
<P><A name="Programmer Interface"></A>
<HR SIZE=6>
<A name=SEC13></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC12"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC14"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC7"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC4"> Up </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H2>2.4 Programmer Interface </H2><!--docid::SEC13::-->
<P>First an example source code will be shown so that the programmer gets an 
idea of what it takes to incorporate <CODE>opt</CODE> into his or her favorite 
application. Subsequent sections will then go into more detailed explanation. 
</P>
<P>
<BLOCKQUOTE>
  <TABLE cellSpacing=0 border=0>
    <TBODY>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC14">2.4.1 
        Example code</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC15">2.4.2 
        Registering options</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC23">2.4.3 
        Setting some strings</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC24">2.4.4 
        Registering functions (hooks)</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC25">2.4.5 
        Misc</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR></TBODY></TABLE></BLOCKQUOTE>
<P><A name="Example code"></A>
<HR SIZE=6>
<A name=SEC14></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC13"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC15"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC7"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC13"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H3>2.4.1 Example code </H3><!--docid::SEC14::-->
<P>The easiest way to see how to use the <CODE>opt</CODE> package is with an 
example. The following program illustrates most of the features that you'd 
actually want to use (and several you probably don't care about). </P>
<P>
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>/* testopt.c */

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;opt.h&gt;

int month=4;
int day=24;
int year=1993;
char *who=NULL;

int go(int argc, char **argv)
{
    if (argc&gt;1) {
        printf("In program %s, Extra option: %s\n",argv[0],argv[1]);
    }

    if (optinvoked(&amp;month)) {
        printf("User set month...\n");
    }

    if (month == 9 &amp;&amp; day == 11 &amp;&amp; year == 1989) {
        printf("Happy birthday, Max\n");
    } else {
        printf("Hello, %s: %4d/%02d/%02d\n",(who==NULL ? "world" : who),
               year,month,day);
    }
    return OPT_OK;
}

int checkyear(void *v)
{
    if (year == 2000) {
        printf("Watch out for that year=2000 bug!\n");
        return OPT_ERROR;
    }
    return OPT_OK;
}
int quit()
{
    printf("Bye...\n");
    return OPT_OK;
}
int write_altversion()
{
    printf("AltVersion XXX\n");
    optExitNumber(12);
    return OPT_EXIT;
}
int fix_mon(void *v)
{
    int m;
    /* fix whatever int variable v is pointing to */
    m = *((int *)v);
    if (m &lt; 1 || m &gt; 12) 
        m=1;
    *((int *)v) = m;
    return OPT_OK;
} 

main(int argc, char **argv)
{
    optreg(&amp;month,OPT_INT,'m',"Month");
    optlongname(&amp;month,"month");
    opthook(&amp;month,fix_mon);

    optrega(&amp;day,OPT_INT,'d',"day","Day");
    opthelp(&amp;day,"Use day of month, should be less than 32");
    
    optreg_INT(&amp;year,'y',"Year");
    optreg(&amp;year,OPT_INT,'Y',"Year");
    optdescript(&amp;year,"What Year");
    opthook(&amp;year,checkyear);

    optregp(&amp;who,OPT_STRING,"who","Who to say hello to");

    optexec("altversion",write_version,"Write version number and exit");

    optEnvVarName( "OPT" );
    
    optMain(go);
    optQuit(quit);

    opt(&amp;argc,&amp;argv);
    go(argc,argv);
    opt_free();
}



</PRE></TD></TR></TBODY></TABLE></P>
<P><A name="Registering options"></A>
<HR SIZE=6>
<A name=SEC15></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC14"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC16"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC7"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC13"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H3>2.4.2 Registering options </H3><!--docid::SEC15::-->
<P>It is necessary for the programmer to somehow tell the package which options 
are associated with which variables in the program, and what descriptions 
<CODE>opt</CODE> should use in the usage message and the menu. This is done with 
a function call that "registers" (or associates<A 
href="opt.html#FOOT1" 
name=DOCF1>(1)</A>) a variable and a name. These functions (one for each 
variable, in general) are usually called at the beginning of the code. </P>
<P><CODE>Opt</CODE> can handle three kinds of options: </P>
<P>
<DL compact>
  <DT>Delimited options 
  <DD>Options that are "flagged" by the user using a command line switch such as 
  <SAMP>`-n'</SAMP> or <SAMP>`--size'</SAMP>. 
  <P></P>
  <DT>Positional options 
  <DD>Options that do not have an associated switch and simply appear on the 
  command line as bare arguments. 
  <P></P>
  <DT>Flexible options 
  <DD>Options that can appear either as a delimited or a positional argument. 
  </DD></DL>
<P>
<BLOCKQUOTE>
  <TABLE cellSpacing=0 border=0>
    <TBODY>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC16">2.4.2.1 
        Delimited options</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC17">2.4.2.2 
        Positional options</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC18">2.4.2.3 
        Flexible options</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC19">2.4.2.4 
        Default values</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC20">2.4.2.5 
        Modifying option attributes</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC21">2.4.2.6 
        Registering array options</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC22">2.4.2.7 
        Registering options in C++</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR></TBODY></TABLE></BLOCKQUOTE>
<P><A name="Delimited options"></A>
<HR SIZE=6>
<A name=SEC16></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC15"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC17"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC14"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC15"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC16"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H4>2.4.2.1 Delimited options </H4><!--docid::SEC16::-->
<P>Delimited options are the standard options you'd expect an option handling 
package to work with. Delimited options are flagged by the user with a switch 
that starts with <SAMP>`-'</SAMP> or <SAMP>`--'</SAMP>. </P>
<P><SAMP>`Opt'</SAMP> provides a variety of commands for registering delimited 
options with different variable types, and using the "short", or "long" 
delimited option forms (or both). </P>
<P>For example, 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>    optreg(&amp;day,OPT_INT,'d',"Day");
</PRE></TD></TR></TBODY></TABLE>where <VAR>day</VAR> is the name of the variable 
as it appears (for instance as a global variable) in the C program; 
<VAR>OPT_INT</VAR> tells opt that the variable is an <SAMP>`int'</SAMP>, 
<VAR>d</VAR> is the alphabetic character that is used on the command line to 
alter the parameter <VAR>day</VAR>, and <VAR>"Day"</VAR> is a string that will 
be used in the menu and the standard usage messages. </P>
<P>You can register a long (string) name as well as the short (one character) 
name. The function name has an extra <SAMP>`a'</SAMP> (mnemonic: all) at the 
end. 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>optrega(&amp;month,OPT_INT,'m',"month","Month");
</PRE></TD></TR></TBODY></TABLE>With this registration in place, <SAMP>`-m 
4'</SAMP> and <SAMP>`--month=4'</SAMP> have the same effect; to change the value 
of the variable <VAR>month</VAR> to four. If you want to register a long name to 
a variable without also having a short name (this is sometimes desirable if 
there are a lot of options), this can be done with a call to 
<SAMP>`optrega'</SAMP> that sets the short name to the null character; e.g., 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>optrega(&amp;month,OPT_INT,'\0',"month","Month");
</PRE></TD></TR></TBODY></TABLE></P>
<P>The variable <CODE>OPT_INT</CODE> is of type <SAMP>`opt_TYPE'</SAMP>; this is 
an enumerated type and is defined in the header file <TT>`opt.h'</TT>. The 
available option types are: <CODE>OPT_INT</CODE>, <CODE>OPT_SHORT</CODE>, 
<CODE>OPT_LONG</CODE>, <CODE>OPT_CHAR</CODE>, <CODE>OPT_UINT</CODE>, 
<CODE>OPT_USHORT</CODE>, <CODE>OPT_ULONG</CODE>, <CODE>OPT_UCHAR</CODE>, 
<CODE>OPT_FLOAT</CODE>, <CODE>OPT_DOUBLE</CODE>, <CODE>OPT_BOOL</CODE>, 
<CODE>OPT_TOGGLE</CODE>, <CODE>OPT_NEGBOOL</CODE>, <CODE>OPT_NEGTOGGLE</CODE>, 
<CODE>OPT_INTLEVEL</CODE>, <CODE>OPT_STRING</CODE>, <CODE>OPT_CSTRING</CODE>, 
<CODE>OPT_UNDELIM</CODE>, and <CODE>OPT_UNDELIMC</CODE>. There is also a type 
<CODE>OPT_NUL</CODE> that is used internally. </P>
<P>Most of these are self-explanatory: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>OPT_INT     int
OPT_SHORT   short int
OPT_LONG    long int
OPT_UINT    unsigned int
OPT_USHORT  unsigned short int
OPT_ULONG   unsigned long int
OPT_FLOAT   float
OPT_DOUBLE  double
</PRE></TD></TR></TBODY></TABLE>All of these are invoked on the command line 
with the form <SAMP>`-x#'</SAMP> or with <SAMP>`-x #'</SAMP> where 
<SAMP>`#'</SAMP> is the value of the number. Along these same lines is the type 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>OPT_CHAR    char
</PRE></TD></TR></TBODY></TABLE>which can only be invoked as <SAMP>`-x#'</SAMP> 
and not <SAMP>`-x #'</SAMP>. The latter form will assign the <VAR>x</VAR> 
variable to the character value NULL ('\0'), and <SAMP>`#'</SAMP> will be 
treated as the next option. </P>
<P>There are a variety of options for boolean (yes/no, 1/0, on/off) flags: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>OPT_BOOL        int     <I>Probably this is the one that you want.</I>
                        <I>Invoking this option sets the value to 1;</I>
                        <I>and subsequent invocations have no effect.</I>
OPT_TOGGLE      int     <I>Each invocation changes the value -- either</I>
                        <I>from 0 to 1 or from 1 to 0.</I>
OPT_NEGBOOL     int     <I>Like OPT_BOOL but invoking the option sets</I>
                        <I>the value of the variable to 0.</I>
OPT_NEGTOGGLE   int     <I>Like OPT_TOGGLE, in fact a lot like OPT_TOGGLE.</I>
                        <I>I can't think of why you would want to use it.</I>

OPT_FLAG        int     <I>Deprecated! Use OPT_TOGGLE instead.</I>
OPT_NEGFLAG     int     <I>Deprecated! Use OPT_NEGTOGGLE instead.</I>
OPT_ABSFLAG     int     <I>Deprecated! Use OPT_BOOL instead.</I>
OPT_ABSNEGFLAG  int     <I>Deprecated! Use OPT_NEGBOOL instead.</I>

        <I>In my own experience, I have found absolute flags are
           usually preferable to toggle flags. The problem with toggles 
           is that you can easily lose track of the current state of
           the toggle, especially when options can be specified in
           files, environment variables, and the menu, as well as the
           command line itself.
        </I>

OPT_INTLEVEL    int     <I>This is a kind of a combination of flag and int:</I>

        <I>OPT_INTLEVEL is an integer that can take on only positive
           values, usually less than ten.  I find this useful for 
           "verbose" since I can not only turn verbose ON, but I can have
           a range from slightly verbose to extremely verbose.
           For this flag, each invocation increases the level; eg,
           <SAMP>`-v -v'</SAMP> sets verbose=2, and <SAMP>`-v-'</SAMP> turns verbose off.</I>
</PRE></TD></TR></TBODY></TABLE>There are two types of strings, variable and 
constant. Which of these to use depends on how the variable is declared: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>char *vstring=NULL;     /* variable string */
char cstring[80];       /* constant string */
char *cstring="hello";  /* this is a constant string too */
</PRE></TD></TR></TBODY></TABLE>The difference is that <VAR>cstring</VAR> 
already has space allocated for it, so to have <VAR>cstring</VAR> be "string" 
one has to use <SAMP>`strcpy(cstring,"string")'</SAMP>, and note that the 
pointer <VAR>cstring</VAR> itself does not change. By contrast, to use 
<VAR>vstring</VAR>, space must be allocated dynamically. In this case, one has 
to change the value of the pointer <VAR>vstring</VAR> with something like 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>vstring = (char *)malloc(strlen("string")+1);
strcpy(vstring,"string");
</PRE></TD></TR></TBODY></TABLE></P>
<P>
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>OPT_STRING         char *
OPT_CSTRING         char *
</PRE></TD></TR></TBODY></TABLE>By the way, if you are using 
<SAMP>`OPT_CSTRING'</SAMP>, you should make sure that it has room for a string 
of length <SAMP>`OPT_MAXSTRLEN'</SAMP>. But in general, you should prefer 
<SAMP>`OPT_STRING'</SAMP> of the two. (Note, <SAMP>`OPT_STRING'</SAMP> used to 
be called <SAMP>`OPT_VSTRING'</SAMP> but the latter form is now discouraged.) 
</P>
<P><A name="Positional options"></A>
<HR SIZE=6>
<A name=SEC17></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC16"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC18"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC14"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC15"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC16"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H4>2.4.2.2 Positional options </H4><!--docid::SEC17::-->
<P>The second kind of option that <SAMP>`opt'</SAMP> provides is the positional 
option. These are similar to delimited options except that they are not flagged 
by a delimiter switch on the command line. The user specifies values for 
positional options by simply writing those values as bare arguments on the 
command line. The processing of positional options is determined by the order in 
which they appear on the command line, hence the name. </P>
<P>To register a positional option, use the <SAMP>`optregp'</SAMP> command. For 
example: </P>
<P>
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>    char* input = NULL;
    ...
    optregp(&amp;input,OPT_STRING,"input-file","File to process");
</PRE></TD></TR></TBODY></TABLE></P>
<P>In this example, we have associated the variable <SAMP>`input'</SAMP> with a 
positional option of type OPT_STRING (a dynamically allocated string). 
<SAMP>`"input-file"'</SAMP> is a long name associated with the option. It is not 
actually used in option processing for pure positional parameters, but is used 
to refer to the positional argument in the usage message that <SAMP>`opt'</SAMP> 
generates. In addition, if the option is subsequently made "flexible" see 
section <A 
href="opt.html#SEC18">2.4.2.3 Flexible 
options</A>, then the option may be set either positionally OR using a delimited 
option of the form: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>--input-file=fred.txt
</PRE></TD></TR></TBODY></TABLE></P>
<P>Undelimited command line arguments are assigned to positional options in the 
order in which those positional options were registered. If there are 
insufficient command line arguments to process all registered positional 
options, then the remaining postional options are simply never invoked. If there 
are more command line arguments than positional options, then the remaining 
command line arguments are returned to the <SAMP>`argv'</SAMP> array after 
<SAMP>`opt'</SAMP> processing has finished. </P>
<P>Note: At the time of writing, such extra undelimited arguments also cause opt 
processing to terminate immediately, even if there are as yet unprocessed 
delimited arguments on the command line. This is probably a mistake and will be 
fixed in some future release. </P>
<P>Positional options can be registered using any of the types described under 
<A href="opt.html#SEC16">2.4.2.1 
Delimited options</A>. </P>
<P>A delimited option can be turned into a positional (or flexible) option by 
using the <SAMP>`optmode()'</SAMP> function on that option see section <A 
href="opt.html#SEC20">2.4.2.5 Modifying 
option attributes</A>. </P>
<P>In earlier versions of <SAMP>`opt'</SAMP>, positional parameters were handled 
using a special variable type, <SAMP>`OPT_UNDELIM'</SAMP>, that was equivalent 
to <SAMP>`OPT_STRING'</SAMP>, but with positional semantics. This usage is still 
available in <SAMP>`opt'</SAMP> but is deprecated. </P>
<P><A name="Flexible options"></A>
<HR SIZE=6>
<A name=SEC18></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC17"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC19"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC14"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC15"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC16"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H4>2.4.2.3 Flexible options </H4><!--docid::SEC18::-->
<P>The third kind of option is a flexible option. Flexible options are simply 
positional options that can also be set by the user using a delimited switch as 
well. This can be handy in some cases, for instance when setting a positional 
option from a file. </P>
<P>To register a flexible option, you can use the <SAMP>`optregf()'</SAMP> 
function: </P>
<P>
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>    char* input = NULL;
    ...
    optregf(&amp;input,OPT_STRING,'f',"input-file","File to process");
</PRE></TD></TR></TBODY></TABLE></P>
<P>In this example, we have associated the variable <SAMP>`input'</SAMP> with a 
flexible option of type OPT_STRING (a dynamically allocated string). The user 
may set this option either positionally, using the normal rule that positional 
options are processed in the order that they were registered, OR by using a 
delimited option of the form <SAMP>`-f foo.dat'</SAMP> or 
<SAMP>`--input-file=foo.dat'</SAMP>. </P>
<P>An existing positional or delimited option can be turned into a flexible 
option by invoking either the <SAMP>`optmode(...,OPT_FLEXIBLE)'</SAMP> or 
<SAMP>`optmode_n(...,OPT_FLEXIBLE)'</SAMP> functions on that option. </P>
<P><A name="Default values"></A>
<HR SIZE=6>
<A name=SEC19></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC18"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC20"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC14"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC15"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC16"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H4>2.4.2.4 Default values </H4><!--docid::SEC19::-->
<P>To give an option a default value, simply assign an appropriate value to the 
corresponding registered variable, before or after it is registered. Consider 
the following example: </P>
<P>
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>int year=1999;
<I>...</I>
optrega(&amp;year,OPT_INT,'y',"year","Year of interest");
</PRE></TD></TR></TBODY></TABLE></P>
<P>If the user does not invoke the <SAMP>`-y'</SAMP> option, then the variable 
<SAMP>`year'</SAMP> will retain the value of 1999. </P>
<P><A name="Modifying option attributes"></A>
<HR SIZE=6>
<A name=SEC20></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC19"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC21"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC14"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC15"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC16"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H4>2.4.2.5 Modifying option attributes </H4><!--docid::SEC20::-->
<P>If a variable is registered, then you can change or add to its attributes; 
for instance: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>optreg(&amp;var,OPT_INT,'c');
optlongname(&amp;var,"variance");
</PRE></TD></TR></TBODY></TABLE></P>
<P>The various registration functions (<SAMP>`optreg()'</SAMP>, etc) return an 
integer which is the index of the registered option. Sometimes (eg, instance 
when there is no variable associated with the registration) this integer is a 
more useful identifier of a given option. The above, for instance, is equivalent 
to: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>n = optreg(&amp;var,OPT_INT,'c');
optlongname_n(n,"variance");
</PRE></TD></TR></TBODY></TABLE></P>
<P>
<DL compact>
  <DT><CODE>void optchar(void *v, char c)</CODE> 
  <DD>Associates the single-character name with the variable pointed to by 
  <VAR>v</VAR>. 
  <DT><CODE>void optchar_n(int n, char)</CODE> 
  <DD>Associates the single-character name with the <VAR>n</VAR>'th registered 
  variable. 
  <P></P>
  <DT><CODE>void optlongname(void *v, char *longname)</CODE> 
  <DD>Associates the long name to the variable pointed to by <VAR>v</VAR>. 
  <DT><CODE>void optlongname_n(int n, char *longname)</CODE> 
  <DD>Associates the long name to the <VAR>n</VAR>'th registered variable. 
  <P></P>
  <DT><CODE>void optmode(void *v, int mode)</CODE> 
  <DD><VAR>mode</VAR> can be one of <VAR>OPT_DELIMITED</VAR>, 
  <VAR>OPT_POSITIONAL</VAR>, <VAR>OPT_FLEXIBLE</VAR>. Makes the option 
  associated with the variable pointed to by <VAR>v</VAR> have the corresponding 
  mode. 
  <DT><CODE>void optmode_n(int n, int mode)</CODE> 
  <DD>As <SAMP>`optmode()'</SAMP>, but applies to the <VAR>n</VAR>'th option. 
  <P></P>
  <DT><CODE>void optdescript(void *v, char *descript)</CODE> 
  <DD>Changes the brief description of the variable pointed to by <VAR>v</VAR>. 
  <DT><CODE>void optdescript_n(int n, char *descript)</CODE> 
  <DD>Changes the brief description of the <VAR>n</VAR>'th registered variable. 
  <P></P>
  <DT><CODE>void opthelp(void *v, char *help)</CODE> 
  <DD>Associates a longer help string with the variable pointed to by 
  <VAR>v</VAR>. This is the string the user will see upon typing 
  <SAMP>`?c'</SAMP> at the menu prompt, where <SAMP>`c'</SAMP> is the 
  single-character name. 
  <DT><CODE>void opthelp_n(int n, char *help)</CODE> 
  <DD>Associates a longer help string with the <VAR>n</VAR>'th registered 
  variable. 
  <P></P>
  <DT><CODE>void optarraydelim(void *v, char delim)</CODE> 
  <DD>Resets the delimiter (default is comma) for the array variable. Note that 
  using <CODE>optarraydelim(NULL,delim)</CODE> resets the delimiter for all 
  array options. 
  <DT><CODE>void optarraydelim_n(int n, char delim)</CODE> 
  <DD>Resets the delimited for the <VAR>n</VAR>'th registered variable. 
  <P></P></DD></DL>
<P><A name="Registering array options"></A>
<HR SIZE=6>
<A name=SEC21></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC20"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC22"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC14"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC15"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC16"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H4>2.4.2.6 Registering array options </H4><!--docid::SEC21::-->
<P>As well as registering scalar variables, you can also register dynamically 
allocated arrays, and manipulate their values with command line options, 
parameter files, environment strings, or on the menu. As a user, you would type 
for instance <SAMP>`program -x 1,2,3'</SAMP> to set the array values to 1, 2, 
and 3. As a programmer, you need to keep track not only of the array pointer but 
of the size of the array, so to register an array option requires an extra 
argument. For example 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>int nx=0;
double *x=NULL;
<I>...</I>
optreg_array(&amp;nx, &amp;x, OPT_DOUBLE,'x',"Array of x values");
</PRE></TD></TR></TBODY></TABLE></P>
<P>As well as the <CODE>optreg_array</CODE> function, you can also use 
<CODE>optrega_array</CODE>, <CODE>optregc_array</CODE>, 
<CODE>optregcb_array</CODE>, <CODE>optregs_array</CODE>, and 
<CODE>optregsb_array</CODE>. These are essentially equivalent to the scalar 
versions, except that the first argument is a pointer to the size of the array. 
</P>
<P>After the options have been processed, the array <CODE>x[]</CODE> will have 
<CODE>nx</CODE> elements. In the above example, <CODE>nx</CODE> would be 3, and 
<CODE>x[0]</CODE> would be 1, <CODE>x[1]</CODE> would be 2, and 
<CODE>x[2]</CODE> would be 3. It would be a mistake to refer to 
<CODE>x[3]</CODE>, since that is beyond the array bounds, but since the 
programmer has access to <CODE>nx</CODE>, that shouldn't be a problem. </P>
<P>Note that <CODE>opt</CODE> can only handle arrays of simple types (strings, 
characters, and numbers); arrays of <CODE>OPT_BOOL</CODE>'s or 
<CODE>OPT_INTLEVEL</CODE>'s are not supported. </P>
<P>The default delimeter for array values is a comma; this can be changed using 
the <CODE>optarraydelim(void *v,char delim)</CODE> function. </P>
<P>See the file <TT>`test/tarray.c'</TT> for examples of this usage. </P>
<P><A name="Registering options in C++"></A>
<HR SIZE=6>
<A name=SEC22></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC21"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC23"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC14"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC15"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC16"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H4>2.4.2.7 Registering options in C++ </H4><!--docid::SEC22::-->
<P><CODE>opt</CODE> also provides a rudimentary C++ interface. You can always 
use the plain C code inside your C++ programs, but you may find it a little more 
convenient to use the <CODE>OptRegister</CODE> function. This function can be 
used like <CODE>optrega</CODE> except that it has a lot more flexibility. Also, 
if you want to register a standard type, like <CODE>OPT_INT</CODE> or 
<CODE>OPT_DOUBLE</CODE> but not a specialty like <CODE>OPT_UNDELIM</CODE> or 
<CODE>OPT_INTLEVEL</CODE>, then you can just leave out the type specifier -- C++ 
knows what you mean. For example: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>  // Can invoke with -N500 or --nPulses=500
  OptRegister(&amp;N, 'N', "nPulses","total Number of pulses");
  
  // Can only invoke with long name --delta=0.01
  OptRegister(&amp;delta,"delta","average time between pulses");

  // Can only invoke with short name -x3.14159
  OptRegister(&amp;x,'x',"x marks [the horizontal position of] the spot")

  // You have to specify flags as such, otherwise they are 
  // treated as ordinary integers.  Note that the variable is 
  // still an integer.  Currently there is no support for the 
  // C++ bool type, which is unfortunate.
  OptRegister(&amp;flag,OPT_BOOL,'f',"flag","boolean variable");

  // The descriptions are optional, so you can have very simple commands
  OptRegister(&amp;y,'y');
  
  // But beware that there can be ambiguity between longname and description.
  // The first string is assumed to be the longname
  OptRegister(&amp;z,'z',"third coordinate value"); // error!

  // You can also register positional options using OptRegister
  OptRegister(&amp;y, OPT_POSITIONAL, "y-value", "The value of y");

  // Or flexible options
  OptRegister(&amp;y, OPT_FLEXIBLE, "y-value", "The value of y", OPT_FLEXIBLE);

  // If you specify both a type and a mode, specify the type first
  OptRegister(&amp;flag,OPT_BOOL,OPT_FLEXIBLE,'f',"flag","boolean variable");

</PRE></TD></TR></TBODY></TABLE></P>
<P>See the example file <TT>`test/testcc.cc'</TT> for a working example. </P>
<P>Note that using these routines requires that <TT>`libopt.a'</TT> or 
<TT>`opt.o'</TT> be compiled using a C++ compiler. This is normally handled 
automatically by the installation procedure. If you want to include a single 
file with your distribution containing the opt code, then use 
<SAMP>`optcc.cc'</SAMP> rather than <SAMP>`opt.c'</SAMP>. Both of these are 
generated automatically as part of the opt install procedure. </P>
<P>Beware that there is a problem with gcc 3.0 and 3.1 on Solaris. The problem 
has been traced to the compiler itself, and the maintainers have promised that 
it will be fixed in the next release. If you use the environment variable 
<CODE>CPLUS_INCLUDE_PATH</CODE> to tell the compiler where <TT>`opt.h'</TT> is 
located, then you will get error messages during compilation. One solution is to 
use the explicit <CODE>-I...</CODE> directive during compilation. Another is to 
disable the C++ interface in opt by <CODE>#define</CODE>'ing the variable 
<CODE>OPT_NOCPLUSINTERFACE</CODE> before <CODE>#include</CODE>'ing 
<TT>`opt.h'</TT>. This however will disable the overloaded 
<CODE>OptRegister</CODE> function, and you'll have to use the bulkier 
<CODE>optreg</CODE> functions from the C interface. </P>
<P><A name="Setting some strings"></A>
<HR SIZE=6>
<A name=SEC23></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC22"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC24"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC7"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC13"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H3>2.4.3 Setting some strings </H3><!--docid::SEC23::-->
<P>The following functions set strings which the <CODE>opt</CODE> package uses 
for various things. 
<DL compact>
  <DT><CODE>void optUsage(char *s)</CODE> 
  <DD>Sets the usage statement that the program will print as part of the help 
  message. 
  <P></P>
  <DT><CODE>void optTitle(char *s)</CODE> 
  <DD>Sets the title, which appears as the first line in the menu. If not set, 
  then the program name is used. 
  <P></P>
  <DT><CODE>void optProgName(char *s)</CODE> 
  <DD>Sets the program name, which appears in the usage message. Any leading 
  directories in <VAR>s</VAR> are stripped off. If the program name is not set 
  explicitly, then it is set when <SAMP>`opt()'</SAMP> is called. The programmer 
  might want to set the program name using this function, if for some reason 
  <VAR>argv[0]</VAR> does not contain the command that runs the program, or to 
  ensure that the usage message can be displayed using the 
  <SAMP>`optPrintUsage()'</SAMP> function, before <SAMP>`opt()'</SAMP> has been 
  invoked. 
  <P></P>
  <DT><CODE>void optVersion(char *s)</CODE> 
  <DD>Sets the version number of the program that you are writing. When the user 
  types <SAMP>`program --version'</SAMP>, then this is the version number that 
  is printed. Note that if the function <CODE>optVersion</CODE> is not used, 
  then <SAMP>`--version'</SAMP> will do nothing (except get a warning message 
  that <SAMP>`version'</SAMP> is not a registered option). 
  <P></P>
  <DT><CODE>void optEnvVarName(char *s)</CODE> 
  <DD>Sets the name of the environment variable where the <CODE>opt</CODE> 
  package will look for initial command line options. If not set, the 
  <CODE>opt</CODE> will not be check any environment variable for options 
  processing. 
  <P></P>
  <DT><CODE>void optDefaultString(char *s)</CODE> 
  <DD>The program itself can define a default command line to be processed 
  before the environment string and before the actual command line. To be 
  honest, I can't imagine when you'd want to use this in real life. 
  <P></P>
  <DT><CODE>void optDefaultFile(char *s)</CODE> 
  <DD>The program can define a file name, eg <TT>`~/.programrc'</TT> or 
  <TT>`/etc/program.opt'</TT>, in which to look for default options for the 
  program. If the file exists, then its options are read in before reading the 
  environment string or the command line. 
  <P></P></DD></DL>
<P><A name="Registering functions (hooks)"></A>
<HR SIZE=6>
<A name=SEC24></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC23"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC25"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC7"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC13"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H3>2.4.4 Registering functions (hooks) </H3><!--docid::SEC24::-->
<P>Hooks are means by which the user can write routines which the 
<CODE>opt</CODE> package calls during its processing. This enables the 
programmer to customize the behavior of <CODE>opt</CODE> to the program at hand. 
Of course <CODE>opt</CODE> has to be informed of the function (in the same way 
that variables have to be registered, so do functions). The hook function should 
always return an integer, and a value of zero is the default that tells 
<CODE>opt</CODE> that all is okay. (You can also return <SAMP>`OPT_OK'</SAMP>, 
which is defined to be zero in <TT>`opt.h'</TT>.) The return value tells 
<CODE>opt</CODE> what to do after the hook has been run. [** Warning: I am 
thinking of changing these. --jt **] 
<DL compact>
  <DT><CODE>OPT_OK</CODE> 
  <DD>Default. Keep processing options. 
  <DT><CODE>OPT_ERROR</CODE> 
  <DD>Signals to <CODE>opt</CODE> that the hook was not successful. Currently, 
  <CODE>opt</CODE> doesn't do anything differently from what it does if 
  <SAMP>`OPT_OK'</SAMP> is returned. 
  <DT><CODE>OPT_EXIT</CODE> 
  <DD>Program exits using the C command <SAMP>`exit(n);'</SAMP> The value of n 
  will be zero unless it has been set by the function 
  <SAMP>`optExitNumber(n)'</SAMP>. 
  <DT><CODE>OPT_QUIT</CODE> 
  <DD>Program exits, as with <SAMP>`OPT_EXIT'</SAMP>, but it will first check to 
  see if a quit-hook has been defined with the <SAMP>`optQuit()'</SAMP> 
  function. If one has, then it will run the quit-hook and then exit. 
  <DT><CODE>OPT_ABORT</CODE> 
  <DD>If you are in the menu, you should be returned to the prompt (assuming you 
  configured <CODE>opt</CODE> to <SAMP>`--enable-longjmp'</SAMP> (default) at 
  compile time); but if you are running from the command line, the program will 
  quit calling a quit-hook if one has been defined. </DD></DL>
<P>There are basically two kinds of hooks. The first kind is associated with a 
specific variable, and it is run whenever that option is invoked. These hooks 
take a single argument, a <SAMP>`void *'</SAMP> that points to the associated 
variable. The second kind of hook is not associated with a specific variable, 
and it takes no arguments. It might be associated with a command line string 
(such as <SAMP>`--version'</SAMP> which you might want to use to make the 
program write a version number and exit; but see the <CODE>optVersion</CODE> 
function in <A 
href="opt.html#SEC23">2.4.3 Setting 
some strings</A>.), or with the general behavior of <CODE>opt</CODE>, such as 
the quit hook described below. Here, <SAMP>`OPT_PFI'</SAMP> is declared 
<SAMP>`typedef int (*OPT_PFI)()'</SAMP> in the header file <TT>`opt.h'</TT>; it 
is a pointer to a function returning an integer. (Currently we exploit C's loose 
typecasting rules, so that <SAMP>`OPT_FPI'</SAMP> refers to a function with any 
number of arguments, as long as it returns an integer. In future versions, we 
may define <SAMP>`OPT_PFI_V'</SAMP> and <SAMP>`OPT_PFI_ARG'</SAMP> types, to 
indicate functions that take arguments <SAMP>`void *'</SAMP> and <SAMP>`int,char 
**'</SAMP> respectively.) </P>
<P>The first kind of hook is registered with the function 
<SAMP>`opthook()'</SAMP>. For instance, if you register a hook with a statement 
such as 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>int fix_mon(void *v) { ... }
int month=9;
...
optreg(&amp;month,OPT_INT,'m',"Month");
opthook(&amp;month,fix_mon)
</PRE></TD></TR></TBODY></TABLE>then the function <SAMP>`fix_mon'</SAMP> will be 
called when the 'm' option is invoked. For instance, the function might 
determine whether the integer <VAR>month</VAR> variable was between 1 and 12, 
and if not, to fix it in some way. Note that the hook function 
<SAMP>`fix_mon'</SAMP> takes a single <SAMP>`void *'</SAMP> argument; when 
<CODE>opt</CODE> calls the hook function, it will use a pointer to the variable 
<VAR>month</VAR> as the argument. You can use the argument to get (and 
manipulate) the value of the variable <VAR>month</VAR>. However, if the variable 
is global, then you can also manipulate the month directly. So the following two 
examples serve the same purpose. 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>int fix_mon(void *v) 
{
    /* don't bother using the argument v; 
     * just manipulate month directly */ 
    if (month &lt; 1 || month &gt; 12) 
        month=1; 
    return OPT_OK; 
}
</PRE></TD></TR></TBODY></TABLE>and 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>int fix_mon(void *v)
{
    int m;
    /* fix whatever int variable v is pointing to */
    m = *((int *)v);
    if (m &lt; 1 || m &gt; 12) 
        m=1;
    *((int *)v) = m;
    return OPT_OK;
} 
</PRE></TD></TR></TBODY></TABLE>The second example is not as pretty to look at, 
but it is more general. It does not have to know which variable it is fixing, 
and in fact you can <SAMP>`opthook'</SAMP> this function to several variables, 
and it will apply the <SAMP>`fix_mon'</SAMP> algorithm to those variables as 
they are invoked. </P>
<P>
<DL compact>
  <DT><SAMP>`void opthook(void *v, OPT_PFI fcn)'</SAMP> 
  <DD>associates a hook <SAMP>`fcn'</SAMP> with the variable pointed to by 
  <VAR>v</VAR>. Whenever the option associated with <VAR>v</VAR> is invoked, eg 
  from the command line, the hook is called. 
  <DT><SAMP>`void opthook_n(int n, OPT_PFI fcn)'</SAMP> 
  <DD>associates a hook <SAMP>`fcn'</SAMP> with the <VAR>n</VAR>'th option. 
  <VAR>n</VAR> is the value returned by the registration function 
  <SAMP>`optreg'</SAMP>. 
  <DT><SAMP>`int optexec(char *longname, OPT_PFI fcn, char *descript)'</SAMP> 
  <DD>associates a hook <SAMP>`fcn'</SAMP> to the string pointed to by 
  <VAR>longname</VAR>. For instance, the command 
  <SAMP>`optexec("altversion",print_version,"Write version info and 
  exit");'</SAMP> will cause the function <SAMP>`print_version()'</SAMP> to be 
  called whenever the string <SAMP>`--altversion'</SAMP> appears on the command 
  line. The function <SAMP>`print_version()'</SAMP> takes no argument, and 
  depending on its return value, the program will either exit or keep going 
  after printing the version string. (Note that <SAMP>`--version'</SAMP> is an 
  opt builtin; see the <CODE>optVersion</CODE> function in <A 
  href="opt.html#SEC23">2.4.3 Setting 
  some strings</A>.) 
  <P></P>
  <DT><SAMP>`optMain(OPT_PFI fcn)'</SAMP> 
  <DD>The most commonly used hook in an <CODE>opt</CODE> program, at least by 
  me. This function is run when the user types <SAMP>`='</SAMP> at the 
  <CODE>opt</CODE> menu prompt. Usually, the programmer writes 
  <SAMP>`fcn(argc,argv)'</SAMP> to do whatever it is that the program is 
  supposed to do (essentially the same as <SAMP>`main(argc,argv)'</SAMP> but 
  without the command line parsing that <CODE>opt</CODE> is taking care of). The 
  arguments <SAMP>`argc,argv'</SAMP> that <SAMP>`fcn'</SAMP> sees are the 
  command line strings that are "leftover" after <CODE>opt</CODE> has finished 
  parsing; <SAMP>`argv[0]'</SAMP> is retained however, so that 
  <SAMP>`fcn'</SAMP> behaves just like a <SAMP>`main'</SAMP> function would 
  behave. When <SAMP>`fcn'</SAMP> is finished, you will be returned to the 
  command line prompt. If <CODE>opt</CODE> was configured at compile time with 
  the <SAMP>`--enable-longjmp'</SAMP> (default), then if you interrupt (^C) 
  <SAMP>`fcn'</SAMP> while it is running, you will be returned to the command 
  prompt (instead of exiting the program completely). 
  <P></P>
  <DT><SAMP>`optRun(OPT_PFI run)'</SAMP> 
  <DD>This is essentially the same as <SAMP>`optMain'</SAMP>, except that the 
  function <SAMP>`run()'</SAMP> takes no arguments. If you set this hook and the 
  hook in <SAMP>`optMain'</SAMP>, then this hook will be ignored. 
  <DT><SAMP>`optQuit(OPT_PFI fcn)'</SAMP> 
  <DD>is a hook that is run just before the program that is using 
  <CODE>opt</CODE> exits. 
  <P></P>
  <DT><SAMP>`optAdditionalUsage(OPT_PFI fcn)'</SAMP> 
  <DD>This hook is run at the end of the usage message, and can be used to 
  provide the user with additional usage information. 
  <P></P>
  <DT><SAMP>`void optExitNumber(int n)'</SAMP> 
  <DD>If opt has to exit, then call exit(n); 
  <P></P></DD></DL>
<P><A name=Misc></A>
<HR SIZE=6>
<A name=SEC25></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC24"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC7"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC13"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &gt;&gt; 
      </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H3>2.4.5 Misc </H3><!--docid::SEC25::-->
<DL compact>
  <DT><CODE>int optinvoked(void *v)</CODE> 
  <DD>Returns the number of times the option associated with the variable 
  pointed to by <VAR>v</VAR> was invoked by the user. 
  <P></P>
  <DT><CODE>void optPrintUsage()</CODE> 
  <DD>Print the current usage message to standard out. 
  <P></P>
  <DT><CODE>void opt_free()</CODE> 
  <DD>If you are worried about memory leaks, you should call this routine when 
  you are finished using opt routines. Most of the time, that means you can 
  invoke <SAMP>`opt_free()'</SAMP> right after 
  <SAMP>`opt(&amp;argc,&amp;argv)'</SAMP>, but after <SAMP>`opt_free()'</SAMP>, 
  you won't be able to use <SAMP>`optinvoked'</SAMP> for example. Note that this 
  will not free all the memory that <CODE>opt</CODE> allocated -- for instance, 
  it makes copies of string parameters that are specified on a command line. But 
  also note that <CODE>opt</CODE> does not generally take a lot of memory, so if 
  you leave off this command, you will nearly always be just fine. 
  <P></P></DD></DL>
<P><A name=Etc></A>
<HR SIZE=6>
<A name=SEC26></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC25"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC27"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC4"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top"> Up 
    </A>]</TD>
    <TD vAlign=center align=left>[ &gt;&gt; ]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H1>3. Etc </H1><!--docid::SEC26::-->
<P>
<BLOCKQUOTE>
  <TABLE cellSpacing=0 border=0>
    <TBODY>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC27">3.1 
        Installation</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC28">3.2 
        Adding <CODE>opt</CODE> to existing code: a recipe</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC29">3.3 So, 
        you don't like global variables?</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC30">3.4 
        Single file</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC31">3.5 
        Extensions</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC32">3.6 
        Bugs</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC33">Warranty</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR>
    <TR>
      <TD vAlign=top align=left><A 
        href="opt.html#SEC34">Copying</A></TD>
      <TD>&nbsp;&nbsp;</TD>
      <TD vAlign=top align=left></TD></TR></TBODY></TABLE></BLOCKQUOTE>
<P><A name=Installation></A>
<HR SIZE=6>
<A name=SEC27></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC28"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[ &gt;&gt; ]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H2>3.1 Installation </H2><!--docid::SEC27::-->
<P>Because <CODE>opt</CODE> does not require exotic systems services or esoteric 
libraries, installation on a variety of platforms should be straightforward. 
What follows is a guide to installing OPT on a UNIX system, but I have heard of 
at least one successful install on a Microsoft operating system. </P>
<P>First you have to un-archive the <TT>`opt-XXX.tar.gz'</TT> file, where 
<SAMP>`XXX'</SAMP> is the version number, using commands along these lines: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>           gzip -d opt-XXX.tar.gz
           tar xvf opt-XXX.tar
           cd opt-XXX
</PRE></TD></TR></TBODY></TABLE></P>
<P>Then, it's bascially a generic GNU installation, with <CODE>configure</CODE>, 
<CODE>make</CODE>, and <CODE>make install</CODE>. More details can be found in 
the <TT>`INSTALL'</TT> file that should be in the distribution, but those are 
details about the generic installation procedure, and contain no 
<CODE>opt</CODE>-specific notes. </P>
<P>
<OL>
  <LI>You configure with the command <SAMP>`./configure'</SAMP> where the 
  initial <SAMP>`./'</SAMP> is to ensure that you are running the configure 
  script that is in the current directory. You can also use the configure 
  command with options. Type <SAMP>`./configure --help'</SAMP> to see what those 
  options are. One of the most useful is the 
  <SAMP>`--prefix=<I>PATHNAME</I>'</SAMP> option, which tells you where to 
  install it. In this example, the file <TT>`libopt.a'</TT> will be installed in 
  the directory <TT>`<I>PATHNAME</I>/lib'</TT>, the header file <TT>`opt.h'</TT> 
  will be installed in <TT>`<I>PATHNAME</I>/include'</TT>, and the info file 
  <TT>`opt.info'</TT> will be installed in <TT>`<I>PATHNAME</I>/info'</TT>. Some 
  <CODE>opt</CODE>-specific options are: 
  <DL compact>
    <DT><SAMP>`--disable-longjmp'</SAMP> 
    <DD>If <CODE>longjmp</CODE> is enabled (default), then hitting 
    <SAMP>`^C'</SAMP> during a run launched from the menu prmopt will return you 
    to the menu prompt; if <CODE>longjmp</CODE> is disabled, then 
    <SAMP>`^C'</SAMP> exits the program entirely. You should only disable 
    longjmp if you have trouble compiling. 
    <DT><SAMP>`--with-readline'</SAMP> 
    <DD>If your system has <CODE>GNU readline</CODE> installed<A 
    href="opt.html#FOOT2" 
    name=DOCF2>(2)</A>, you can specify this option to obtain readline features 
    (line editing, history recall, etc) in the <CODE>opt</CODE> menu. If you 
    will be using the menu even a little bit, these features are very 
    convenient. 
    <DT><SAMP>`--enable-flagonezero'</SAMP> 
    <DD>By default, flag values of true and false are recorded (to the 
    <CODE>.opt</CODE> file for instance) with <SAMP>`+'</SAMP> or 
    <SAMP>`-'</SAMP>, respectively; eg, <CODE>-v+</CODE> turns on the 
    <CODE>v</CODE>-flag. But if you invoke <CODE>--enable-flagonezero</CODE>, 
    then true and false are encoded as <SAMP>`1'</SAMP> and <SAMP>`0'</SAMP> 
    instead. If you have a lot of long option names, it looks a little cleaner 
    (some might argure) to have <SAMP>`--verbose=0'</SAMP> rather than the 
    default <SAMP>`--verbose=-'</SAMP>. </DD></DL>
  <P></P>
  <LI>The next step is easy, just type <SAMP>`make'</SAMP>. If this fails, you 
  may need to reconfigure in the previous step. Or, you may have a defective 
  version of <CODE>opt</CODE>, or you may be compiling it on a new platform 
  <P></P>
  <LI>Although it is not necessary, you are encouraged to type <SAMP>`make 
  check'</SAMP>. This runs a number of tests to make sure that the 
  <CODE>opt</CODE> package you just compiled is actually working. The tests in 
  the <TT>`test/'</TT> directory also serve as example code to show you how to 
  use the opt package in your own programs. 
  <P></P>
  <LI>The last step is to type <SAMP>`make install'</SAMP> but you should be 
  sure you have permission to write to the directories where <TT>`libopt.a'</TT> 
  and <TT>`opt.h'</TT> will be copied. This is by default 
  <TT>`/usr/local/lib'</TT> and <TT>`/usr/local/include'</TT>, but that can be 
  changed at the configure step (see <TT>`INSTALL'</TT> for details). Unless you 
  are installing <CODE>opt</CODE> into your personal directory, you will 
  probably have to become "root" before you do this step. </LI></OL>
<P><A name=recipe></A>
<HR SIZE=6>
<A name=SEC28></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC27"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC29"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[ &gt;&gt; ]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H2>3.2 Adding <CODE>opt</CODE> to existing code: a recipe </H2><!--docid::SEC28::-->Suppose your code initially looks like this: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>/* yourprogram.c */
#include &lt;stdio.h&gt;

int N=5;           /* Global variable */

int
main(int argc, char **argv)
{
        /** do some complicated thing  **
         ** that depends on value of N **/
}
</PRE></TD></TR></TBODY></TABLE>
<P>You want to use the <CODE>opt</CODE> package to make the variable 
<VAR>N</VAR> into a parameter that can be altered on the command line. Here is 
the recipe. </P>
<P>
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>/* yourprogramonopt.c */
#include &lt;stdio.h&gt;
#include &lt;opt.h&gt;

int N=5;           /* Global variable */

int
youroldmain(int argc, char **argv)
{
        /** do some complicated thing  **
         ** that depends on value of N **/
}

int
main(int argc, char **argv)
{
        optreg(&amp;N,OPT_INT,'N',"Number that complicated thing depends on");
        optMain(youroldmain);
        opt(&amp;argc,&amp;argv)
        return youroldmain(argc,argv);
}
</PRE></TD></TR></TBODY></TABLE>Basically, you need to include the 
<TT>`opt.h'</TT> header file, register the variables that will be command line 
parameters, register your original <SAMP>`main'</SAMP> function (only now 
renamed not to conflict with the new <SAMP>`main()'</SAMP>), call the 
<SAMP>`opt()'</SAMP> function itself, and then call your original 
<SAMP>`main()'</SAMP> function (now renamed). </P>
<P>If you don't want to use a different <SAMP>`main'</SAMP> function, then you 
don't have to. In fact the only drawback with this approach is that the user 
won't be able to use the <SAMP>`"="'</SAMP> command to run the program from 
within the menu. In such a case, you may want to disable the menu anyway, using 
the <SAMP>`optDisableMenu()'</SAMP> function. </P>
<P>If the "complicated thing that depends on N" depends on 
<VAR>argc</VAR>,<VAR>argv</VAR>, then the <VAR>argc</VAR>,<VAR>argv</VAR> that 
<SAMP>`youroldmain()'</SAMP> will see will be the leftover arguments on the 
command line that come after the <SAMP>`-N 5'</SAMP>, or the arguments that come 
after <SAMP>`--'</SAMP> on the command line. </P>
<P>When the users use your program in the menu mode, they can try different 
values of <VAR>N</VAR>, eg 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>-&gt; N 5                 <I>;user types `N 5' in response to prompt `-&gt;'</I>
-&gt; =                   <I>;user says to do the complicated thing</I>
5                      <I>;output of complicated thing, followed by prompt</I>
-&gt; N 500 =             <I>;user tries another value, and says run with that</I>
2 2 5 5 5              <I>;computer responds</I>
-&gt; N 12345678          <I>;user types in too large a value, computer hangs</I>
^C                     <I>;user hits ^C</I>
-&gt;                     <I>;computer responds with menu prompt, so user can</I>
                       <I>;try again with some other value</I>
</PRE></TD></TR></TBODY></TABLE></P>
<P><A name="Global variables"></A>
<HR SIZE=6>
<A name=SEC29></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC28"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC30"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[ &gt;&gt; ]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H2>3.3 So, you don't like global variables? </H2><!--docid::SEC29::-->
<P>One, they're not as bad as you might think. Remember, these are not obscure 
variables that will be interacting in odd ways with different components of a 
complicated whole; these are the variables that you want to give the user direct 
access to. </P>
<P>Two, although the examples I've given (and the codes I write) use global 
variables for the user-alterable parameters, it is possible to use 
<CODE>opt</CODE> without global variables. I will leave this as an exercise for 
the reader who gives a damn. </P>
<P><A name="Single file"></A>
<HR SIZE=6>
<A name=SEC30></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC29"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC31"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[ &gt;&gt; ]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H2>3.4 Single file </H2><!--docid::SEC30::-->If you want to include 
<CODE>opt</CODE> in code that you have written to be distributed, you are by the 
GPL quite welcome to do so, following the usual caveats, provisos, and quid pro 
quo's. 
<P>You may find it inconvenient, however, to include the full distribution of 
opt, with all of its automake'd Makefiles, its multiple source files, and the 
extra test and extension directories. As long as your distribution is not an 
extension to opt whose purpose is ever fancier options parsing, but instead does 
something useful and just uses opt for its command line processing, then you are 
permitted to include only the minimal source needed to make <TT>`libopt.a'</TT>. 
In fact, to simplify this task, you can do a <SAMP>`make opt.c'</SAMP> in the 
<TT>`src/'</TT> directory and a single file, called <TT>`opt.c'</TT> of course, 
will be generated. (It is possible that the <CODE>opt</CODE> distribution will 
already have an <TT>`opt.c'</TT> made for you.) You are free to include 
<TT>`opt.c'</TT> along with <TT>`opt.h'</TT> in your distribution. You don't 
even need to make a <TT>`libopt.a'</TT> if you don't want to. Just have your 
<TT>`Makefile'</TT> include lines to this effect: 
<TABLE>
  <TBODY>
  <TR>
    <TD>&nbsp;</TD>
    <TD class=example><PRE>        opt.o: opt.c opt.h
               $(CC) $(CFLAGS) -c opt.c

        yourprogram.o: yourprogram.c opt.h
               ...

        yourprogram: yourpgram.o ... opt.o
               $(CC) $(LDFLAGS) -o yourprogram yourprogram.o ... opt.o
</PRE></TD></TR></TBODY></TABLE>Note that when you make <TT>`opt.c'</TT>, a pair 
of GPL-style copyright-like paragraphs will appear. (They are not actually 
copyright statements, but that's a long story: see Copying.) You are required to 
keep those paragraphs intact, and make sure it includes a pointer so that users 
of your distribution can find my full <CODE>opt</CODE> distribution, if they 
want it. </P>
<P><A name=Extensions></A>
<HR SIZE=6>
<A name=SEC31></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC30"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC32"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[ &gt;&gt; ]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H2>3.5 Extensions </H2><!--docid::SEC31::-->
<P>
<DL compact>
  <DT><SAMP>`tkopt'</SAMP> 
  <DD>is a Tk/Tcl script that is used as a front end to programs that have an 
  <CODE>opt</CODE> interface. To use it type 
  <TABLE>
    <TBODY>
    <TR>
      <TD>&nbsp;</TD>
      <TD class=example><PRE>        tkopt program [options]
</PRE></TD></TR></TBODY></TABLE>and a window will pop up which will permit you 
  to edit all the registered options and parameters, and to run the program. The 
  beauty of <SAMP>`tkopt'</SAMP> is that it knows nothing about the program 
  <SAMP>`program'</SAMP> beforehand. It learns what the options are by running 
  <SAMP>`program --help'</SAMP> and parsing the standard usage message that is 
  output. It also runs <SAMP>`program %tmp.opt'</SAMP> and then reads the 
  <TT>`tmp.opt'</TT> file to determine the defaults. 
  <P></P>
  <DT><SAMP>`opt.pl'</SAMP> 
  <DD>is an old Perl options processing library that is no longer supported, and 
  no longer included with distributions of opt, but in it's place... 
  <P></P>
  <DT><SAMP>`Opt.pm'</SAMP> 
  <DD>is a Perl package module which can be <CODE>use</CODE>'d by other Perl 
  scripts to achieve an opt-like interface. The main bug is that you can already 
  get pretty good option parsing with only a few lines of Perl, and there exist 
  other packages (eg, <CODE>Getopt::Long</CODE>) that perform quite powerful 
  processing. What <CODE>Opt.pm</CODE> provides is nearly identical behavior to 
  the C version. Thus, you can use <CODE>tkopt</CODE> as a front-end to perl 
  scripts using <CODE>Opt.pm</CODE> just like you can use it for C programs 
  linked with <CODE>libopt.a</CODE>. 
  <P></P>
  <DT><SAMP>`READLINE'</SAMP> 
  <DD>If you configure <CODE>opt</CODE> with the <SAMP>`--with-readline'</SAMP> 
  feature, then <CODE>GNU readline</CODE> features (line editing, previous line 
  retrieval, etc) will be available in the menu mode of <CODE>opt</CODE>. To 
  link your program to this code, you'll need to have the 
  <SAMP>`readline'</SAMP> and <SAMP>`termcap'</SAMP> libraries available. But 
  this is all done automagically (where by "magic" I mean code that is 
  embarassingly complicated) by the configure script. So if <TT>`libopt.a'</TT> 
  is built with this option enabled, it will actually incorporate the 
  <SAMP>`readline'</SAMP> and <SAMP>`termcap'</SAMP> libraries within itself, 
  and you don't need to do anything different on the linking step. In 
  particular, you do NOT need to add <SAMP>`-lreadline -ltermcap'</SAMP> to the 
  <SAMP>`cc'</SAMP> command line. If it fails, and you don't feel like trying to 
  figure out why, just reconfigure without the <SAMP>`--with-readline'</SAMP> 
  option. It's nice, but not really crucial. </DD></DL>
<P><A name=Bugs></A>
<HR SIZE=6>
<A name=SEC32></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC31"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC33"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[ &gt;&gt; ]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H2>3.6 Bugs </H2><!--docid::SEC32::-->
<P>Using <CODE>opt</CODE> promotes the use of global variables for the 
parameters that <CODE>opt</CODE> sets. Global variables are generally considered 
harmful to your health, but in my experience, this has rarely been a problem for 
variables that you want the user to have access to anyway. I have seen various 
convoluted schemes for getting around this, but I have not been convinced of 
their usefulness. </P>
<P>Another bug is that <CODE>opt</CODE> doesn't look much like the standard and 
GNU's <CODE>getopt</CODE> package, even though it does pretty much the same 
thing. Partly this is a design choice; I wanted something that was very easy to 
"attach" to the code. In particular, with <CODE>opt</CODE>, you register options 
and associate them with variables; this tends to be a little more compact (and 
in my view more convenient) than the loop and case-statement approach used by 
<CODE>getopt</CODE>. Also, <CODE>opt</CODE> has a few more bells and whistles. 
If I were smart, I would have built <CODE>opt</CODE> as an add-on to the 
standard <CODE>getopt</CODE>. </P>
<P><A name=Warranty></A>
<HR SIZE=6>
<A name=SEC33></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC32"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC34"> &gt; 
    </A>]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[ &gt;&gt; ]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H2>Warranty </H2><!--docid::SEC33::-->none. 
<P><A name=Copying></A>
<HR SIZE=6>
<A name=SEC34></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC33"> &lt; 
    </A>]</TD>
    <TD vAlign=center align=left>[ &gt; ]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> &lt;&lt; 
      </A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC26"> Up 
</A>]</TD>
    <TD vAlign=center align=left>[ &gt;&gt; ]</TD>
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>&nbsp; 
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H2>Copying </H2><!--docid::SEC34::-->
<P>The subroutines and source code in the <CODE>opt</CODE> package are free. 
</P>
<P>However, I was paid to write this software. That is to say, I wrote this 
software while being paid by the University of California to work for the 
Department of Energy at Los Alamos National Laboratory. I like my job, and am 
grateful to the Laboratory for the opportunity to do interesting work and 
collect a nice paycheck. However, I do NOT own the copyright on this software, 
and the conditions for redistributing <CODE>opt</CODE> reflect that. </P>
<P>These conditions, encrypted in legalese, are described in the file 
<TT>`COPYING'</TT> that should be included in the <CODE>opt</CODE> distribution. 
For practical purposes, this is the same as the GNU General Public License, 
although I read it as saying that the US Government paid for this software, and 
the US Government doesn't consider itself bound by the more restrictive aspects 
of the GPL. But the rest of you are. </P>
<P>My own imprecise interpretation of the GPL, as it applies to 
<CODE>opt</CODE>, follows. I should say that this is a heavily edited version of 
a <SAMP>`Copying'</SAMP> section that I copied from some other GNU package (now 
forgotten). </P>
<P>Everyone is free to use this software and free to redistribute it on a free 
basis. The <CODE>opt</CODE> library is not in the public domain; there are 
restrictions on its distribution, but these restrictions are designed to permit 
everything that a good cooperating citizen would want to do. What is not allowed 
is to prevent or inhibit others from further sharing any version of this 
software that they might get from you. </P>
<P>Specifically, I want to make sure that you have the right to give away copies 
of <CODE>opt</CODE>, that you receive source code or else can get it if you want 
it, that you can change <CODE>opt</CODE> or use pieces of it in new free 
programs, and that you know you can do these things. </P>
<P>To make sure that everyone has such rights, I cannot and do not give you the 
"right" to deprive anyone else of these rights. For example, if you distribute 
copies of the <CODE>opt</CODE>-related code, you must give the recipients all 
the rights that you have. You must make sure that they, too, receive or can get 
the source code. And you must tell them their rights. </P>
<P>Also, for my own protection, I must make certain that everyone finds out that 
there is no warranty for <CODE>opt</CODE>. If this software is modified by 
someone else and passed on, I want the recipients to know that what they have is 
not what I distributed, so that any problems introduced by others will not 
reflect on my reputation, feeble though it may be. </P>
<P>Let me say that by <CODE>opt</CODE>-related, I mostly mean 
<CODE>opt</CODE>-derived. If your software does something substantially 
different from <CODE>opt</CODE>, but uses <CODE>opt</CODE> for its command line 
processing, then you can do what pretty much you like with that code: sell it 
for a profit, design weapons of mass destruction, etc. That's my own view. I 
should note that a more common interpretation of the GPL holds that if you use a 
GPL'd library in your code, then your code must be GPL'd. Just because I don't 
hold this view doesn't mean you are off the hook; it just means that I am 
unlikely to sue you if you use my package under this less restrictive 
interpretation. </P>
<P>But in any case, you should make it clear to the users of your code that the 
options parsing is done by software that is free; you should tell them that free 
software is a wonderful concept; and you should provide the <CODE>opt</CODE> 
source code, or at least provide the users with a pointer to where the code is 
available. (Currently, that is 
<SAMP>`http://nis-www.lanl.gov/~jt/Software'</SAMP>.) </P>
<P>Happy hacking... </P>
<P>
<HR SIZE=6>
<A name=opt.html></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H1>Footnotes</H1>
<H3><A href="opt.html#DOCF1" 
name=FOOT1>(1)</A></H3>
<P>When I say "register" I mean it as a verb, in the sense of "register your 
handgun", and not as a noun, meaning an immediate memory location on a 
microprocessor. I apologize to any old assembler-coders who may find this 
language confusing. 
<H3><A href="opt.html#DOCF2" 
name=FOOT2>(2)</A></H3>
<P>If it doesn't, you can get <CODE>readline</CODE> from any <CODE>GNU</CODE> 
mirror site. 
<HR SIZE=1>
<A name=SEC_Contents></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H1>Table of Contents</H1>
<UL><A href="opt.html#SEC1" 
  name=TOC1>1. Nutshell</A> <BR>
  <UL><A href="opt.html#SEC2" 
    name=TOC2>1.1 What the user sees</A> <BR><A 
    href="opt.html#SEC3" name=TOC3>1.2 
    What the programmer sees</A> <BR></UL><A 
  href="opt.html#SEC4" name=TOC4>2. 
  Opt</A> <BR>
  <UL><A href="opt.html#SEC5" 
    name=TOC5>2.1 Philosophical digression</A> <BR><A 
    href="opt.html#SEC6" name=TOC6>2.2 
    What is Opt?</A> <BR><A 
    href="opt.html#SEC7" name=TOC7>2.3 
    User Interface</A> <BR>
    <UL><A href="opt.html#SEC8" 
      name=TOC8>2.3.1 Direct command line options</A> <BR><A 
      href="opt.html#SEC9" 
      name=TOC9>2.3.2 Options from a named file</A> <BR><A 
      href="opt.html#SEC10" 
      name=TOC10>2.3.3 Environment strings</A> <BR><A 
      href="opt.html#SEC11" 
      name=TOC11>2.3.4 Rudimentary builtin menu</A> <BR><A 
      href="opt.html#SEC12" 
      name=TOC12>2.3.5 Standard usage messages</A> <BR></UL><A 
    href="opt.html#SEC13" 
    name=TOC13>2.4 Programmer Interface</A> <BR>
    <UL><A href="opt.html#SEC14" 
      name=TOC14>2.4.1 Example code</A> <BR><A 
      href="opt.html#SEC15" 
      name=TOC15>2.4.2 Registering options</A> <BR>
      <UL><A href="opt.html#SEC16" 
        name=TOC16>2.4.2.1 Delimited options</A> <BR><A 
        href="opt.html#SEC17" 
        name=TOC17>2.4.2.2 Positional options</A> <BR><A 
        href="opt.html#SEC18" 
        name=TOC18>2.4.2.3 Flexible options</A> <BR><A 
        href="opt.html#SEC19" 
        name=TOC19>2.4.2.4 Default values</A> <BR><A 
        href="opt.html#SEC20" 
        name=TOC20>2.4.2.5 Modifying option attributes</A> <BR><A 
        href="opt.html#SEC21" 
        name=TOC21>2.4.2.6 Registering array options</A> <BR><A 
        href="opt.html#SEC22" 
        name=TOC22>2.4.2.7 Registering options in C++</A> <BR></UL><A 
      href="opt.html#SEC23" 
      name=TOC23>2.4.3 Setting some strings</A> <BR><A 
      href="opt.html#SEC24" 
      name=TOC24>2.4.4 Registering functions (hooks)</A> <BR><A 
      href="opt.html#SEC25" 
      name=TOC25>2.4.5 Misc</A> <BR></UL></UL><A 
  href="opt.html#SEC26" name=TOC26>3. 
  Etc</A> <BR>
  <UL><A href="opt.html#SEC27" 
    name=TOC27>3.1 Installation</A> <BR><A 
    href="opt.html#SEC28" 
    name=TOC28>3.2 Adding <CODE>opt</CODE> to existing code: a recipe</A> <BR><A 
    href="opt.html#SEC29" 
    name=TOC29>3.3 So, you don't like global variables?</A> <BR><A 
    href="opt.html#SEC30" 
    name=TOC30>3.4 Single file</A> <BR><A 
    href="opt.html#SEC31" 
    name=TOC31>3.5 Extensions</A> <BR><A 
    href="opt.html#SEC32" 
    name=TOC32>3.6 Bugs</A> <BR><A 
    href="opt.html#SEC33" 
    name=TOC33>Warranty</A> <BR><A 
    href="opt.html#SEC34" 
    name=TOC34>Copying</A> <BR></UL></UL>
<HR SIZE=1>
<A name=SEC_OVERVIEW></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H1>Short Table of Contents</H1>
<BLOCKQUOTE><A href="opt.html#SEC1" 
  name=TOC1>1. Nutshell</A> <BR><A 
  href="opt.html#SEC4" name=TOC4>2. 
  Opt</A> <BR><A href="opt.html#SEC26" 
  name=TOC26>3. Etc</A> <BR></BLOCKQUOTE>
<HR SIZE=1>
<A name=SEC_About></A>
<TABLE cellSpacing=1 cellPadding=1 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Top">Top</A>]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_Contents">Contents</A>]</TD>
    <TD vAlign=center align=left>[Index]</TD>
    <TD vAlign=center align=left>[<A 
      href="opt.html#SEC_About"> ? 
    </A>]</TD></TR></TBODY></TABLE>
<H1>About this document</H1>This document was generated by <I>James Theiler</I> 
on <I>June, 23 2003</I> using <A 
href="http://www.mathematik.uni-kl.de/~obachman/Texi2html"><I>texi2html</I></A> 
<P></P>The buttons in the navigation panels have the following meaning: 
<P></P>
<TABLE border=1>
  <TBODY>
  <TR>
    <TH>Button </TH>
    <TH>Name </TH>
    <TH>Go to </TH>
    <TH>From 1.2.3 go to</TH></TR>
  <TR>
    <TD align=middle>[ &lt; ] </TD>
    <TD align=middle>Back </TD>
    <TD>previous section in reading order </TD>
    <TD>1.2.2 </TD></TR>
  <TR>
    <TD align=middle>[ &gt; ] </TD>
    <TD align=middle>Forward </TD>
    <TD>next section in reading order </TD>
    <TD>1.2.4 </TD></TR>
  <TR>
    <TD align=middle>[ &lt;&lt; ] </TD>
    <TD align=middle>FastBack </TD>
    <TD>previous or up-and-previous section </TD>
    <TD>1.1 </TD></TR>
  <TR>
    <TD align=middle>[ Up ] </TD>
    <TD align=middle>Up </TD>
    <TD>up section </TD>
    <TD>1.2 </TD></TR>
  <TR>
    <TD align=middle>[ &gt;&gt; ] </TD>
    <TD align=middle>FastForward </TD>
    <TD>next or up-and-next section </TD>
    <TD>1.3 </TD></TR>
  <TR>
    <TD align=middle>[Top] </TD>
    <TD align=middle>Top </TD>
    <TD>cover (top) of document </TD>
    <TD>&nbsp; </TD></TR>
  <TR>
    <TD align=middle>[Contents] </TD>
    <TD align=middle>Contents </TD>
    <TD>table of contents </TD>
    <TD>&nbsp; </TD></TR>
  <TR>
    <TD align=middle>[Index] </TD>
    <TD align=middle>Index </TD>
    <TD>concept index </TD>
    <TD>&nbsp; </TD></TR>
  <TR>
    <TD align=middle>[ ? ] </TD>
    <TD align=middle>About </TD>
    <TD>this page </TD>
    <TD>&nbsp; </TD></TR></TBODY></TABLE>
<P></P>where the <STRONG>Example </STRONG>assumes that the current position is 
at <STRONG>Subsubsection One-Two-Three </STRONG>of a document of the following 
structure: 
<UL>
  <LI>1. Section One 
  <UL>
    <LI>1.1 Subsection One-One 
    <UL>
      <LI>... </LI></UL>
    <LI>1.2 Subsection One-Two 
    <UL>
      <LI>1.2.1 Subsubsection One-Two-One 
      <LI>1.2.2 Subsubsection One-Two-Two 
      <LI>1.2.3 Subsubsection One-Two-Three &nbsp; &nbsp; <STRONG>&lt;== Current 
      Position </STRONG>
      <LI>1.2.4 Subsubsection One-Two-Four </LI></UL>
    <LI>1.3 Subsection One-Three 
    <UL>
      <LI>... </LI></UL>
    <LI>1.4 Subsection One-Four </LI></UL></LI></UL>
<HR SIZE=1>
<BR><FONT size=-1>This document was generated by <I>James Theiler</I> on 
<I>June, 23 2003</I> using <A 
href="http://www.mathematik.uni-kl.de/~obachman/Texi2html"><I>texi2html</I></A> 
</FONT></BODY></HTML>
